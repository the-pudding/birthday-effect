import{G as q,a2 as o,a3 as E,a4 as w,a5 as v,a6 as C,a7 as _,a8 as F,a9 as T,aa as D,J as d,ab as g,ac as O,ad as R,ae as h,af as N,ag as A,O as B,ah as p,ai as I,aj as Y,ak as z,al as L,n as l,u as j,am as x}from"./C-KrEM12.js";function m(s,n){var e={f:0,v:s,reactions:null,equals:A,rv:0,wv:0};return e}function S(s){return G(m(s))}function U(s,n=!1){const e=m(s);return n||(e.equals=B),e}function G(s){return o!==null&&!E&&(o.f&v)!==0&&(_===null?T([s]):_.push(s)),s}function H(s,n){return o!==null&&!E&&w()&&(o.f&(v|C))!==0&&(_===null||!_.includes(s))&&F(),J(s,n)}function J(s,n){return s.equals(n)||(s.v,s.v=n,s.wv=D(),k(s,p),d!==null&&(d.f&g)!==0&&(d.f&(O|R))===0&&(h===null?N([s]):h.push(s))),n}function V(s,n=1){var e=q(s),a=n===1?e++:e--;return H(s,e),a}function k(s,n){var e=s.reactions;if(e!==null)for(var a=e.length,u=0;u<a;u++){var r=e[u],c=r.f;(c&p)===0&&(I(r,n),(c&(g|Y))!==0&&((c&v)!==0?k(r,z):L(r)))}}function K(s,n,e){if(s==null)return n(void 0),l;const a=j(()=>s.subscribe(n,e));return a.unsubscribe?()=>a.unsubscribe():a}const f=[];function W(s,n=l){let e=null;const a=new Set;function u(i){if(x(s,i)&&(s=i,e)){const b=!f.length;for(const t of a)t[1](),f.push(t,s);if(b){for(let t=0;t<f.length;t+=2)f[t][0](f[t+1]);f.length=0}}}function r(i){u(i(s))}function c(i,b=l){const t=[i,b];return a.add(t),a.size===1&&(e=n(u,r)||l),i(s),()=>{a.delete(t),a.size===0&&e&&(e(),e=null)}}return{set:u,update:r,subscribe:c}}function $(s){let n;return K(s,e=>n=e)(),n}export{H as a,S as b,K as c,$ as g,J as i,U as m,m as s,V as u,W as w};
